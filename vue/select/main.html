<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="../vue.js"></script>
</head>
<body>
	<div id="app">
		<h2>自定义的下拉框</h2>
		<!-- <custom-select></custom-select>  //自定义组件，需要组测 -->
		
		<!-- //组件间的通信 -->

		<!-- 父组件上通过自定义属性传值 -->
		<custom-select button-value="查询" v-bind:list="list1"></custom-select>
		<custom-select button-value="GO" v-bind:list="list2"></custom-select>
		<table>
			<!-- <custom-select button-value="table">></custom-select> -->   <!-- 受限制的元素，不是允许放的标签 -->
			<!-- 可以选择 --><tr><td><custom-select button-value="table">></custom-select> </td></tr>
			<!-- 或者使用is 拓展 --></tr>

			<!-- 即把custom-select当作tr解析 -->
			<tr is="custom-select"></tr>  
		</table>
		
	</div>
	
	<script type="text/javascript">

		Vue.component("custom-select", {  //自定义select组件
			data: function () {
				return {
					selectShow:false,
					inputValue:"123",
				}
			},//组件里的data必须是函数, 不能写成对象。否则就会共用1个。
			props:["buttonValue","list"],//显式地使用props声明去获得值
			template: `<section class="warp">
						<div class="clearFix" v-on:click="selectShow = !selectShow">
							<input type="text" class="keyWord" :value="inputValue">
							<input type="button" v-bind:value="buttonValue">
							<span></span>
						</div>
						<custom-ul v-show="selectShow" v-bind:child="list" v-on:receive="changeValue"></custom-ul>

					</section>`,
			methods: {
				//自定义事件。
				changeValue(value) {
					this.inputValue = value;
				}
			}
		})
		// <li>html+css</li>
		// 					<li>html+css3</li>
		// 					<li>javascript</li>
		// 					<li>Vue.js</li>
		// 					<li>node.js</li>
		Vue.component("custom-ul", {
			props: ["child"],
			template: `<ul class="list">
							<li v-for="lists in child" v-on:click="selectHandle(lists)">
								{{lists}}
							</li>
						</ul>`,
			methods: {
				//子组件想父组件传递数据 使用自定义事件
				selectHandle(item){
					//在子组件里交互, 告知父组件改变value值，触发自定义事件
					console.log(this.$emit("receive", item))
					// $emit() 方法做的是什么
				}
			}

		})
		// Vue注册组件
		new Vue({
			el:"#app",
			data: {
				list1:["北京","上海","杭州"],
				list2:["100","80","50"]
			},
			methods: {
			}
		})
	</script>
</body>
</html>